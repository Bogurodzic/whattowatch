function filmSearch(e){var t="https://api.themoviedb.org/3/search/movie?api_key=c4d475955f6473a3c143f712208e6b17&query="+e,a=getSettings(t);$.ajax(a).done(function(e){0===e.total_results&&$(createElement("li","No data found.")).appendTo($("#search-list")),$.each(e.results,function(e,t){var a=$(createElement("li",t.title));$(a).on("click",function(){filmDescription(t.id),$("#search-list").stop(!0).slideUp()}),$(a).appendTo($("#search-list"))}),$("#search-list").stop(!0).slideDown()})}function filmDescription(e){var t="http://api.themoviedb.org/3/movie/"+e+"?api_key=c4d475955f6473a3c143f712208e6b17&append_to_response=videos",a=getSettings(t);$.ajax(a).done(function(e){var t=e.title,a=e.original_title,i=shorterText(e.overview),s=e.release_date,l=e.vote_average,r="https://image.tmdb.org/t/p/w500/",n=[];r+=e.poster_path,$.each(e.genres,function(e,t){n.push(t.name)}),console.log(e),$(createElement("div","","film")).appendTo($(document.body)),$(".film:last").append(createElement("div","","film-header")),$(createImage(r)).on("load",function(){$(".film-header:last").addClass("film-image"),$(this).addClass("invisible").appendTo($(".film-header:last")).fadeIn(500)}),$(".film:last").append(createElement("div","","film-description")),$(".film:last .film-description").append(createElement("h2",t,"film-title")),$(".film:last .film-description .film-title").append(createElement("span","  org title: '"+a+"'","film-title-org")),$(".film:last .film-description").append(createElement("p",i,"film-overview")),$(".film:last .film-description").append(isTrailer(e)),$(createElement("div","","film-summary")).appendTo(".film:last .film-description"),$(".film:last .film-description .film-summary").append(createElement("p","<span class='bold'>Genres:</span> "+n,"")),$(".film:last .film-description .film-summary").append(createElement("p","<span class='bold'>Realse:</span> "+s,"")),$(".film:last .film-description .film-summary").append(createElement("p","<span class='bold'>Rating:</span> "+l,"rating")),$(".film:last").append("<i class='close fa fa-times fa-2x' aria-hidden='true'></i>")})}function createElement(e,t,a){return a?"<"+e+" class="+a+">"+t+"</"+e+">":"<"+e+">"+t+"</"+e+">"}function createImage(e){return"<img class='lazy' src="+e+">"}function isTrailer(e){var t=function(){var t;try{t=e.videos.results[0].key}catch(e){t=!1}return t}();return t!==!1?$("<iframe src='https://www.youtube.com/embed/"+t+"' frameborder='0' allowfullscreen></iframe>").addClass("youtube"):$(createImage("http://www.k-state.edu/mog/images/No-Trailer.jpg")).addClass("youtube")}function getSettings(e){return{async:!0,crossDomain:!0,url:e,method:"GET",headers:{},data:"{}"}}function clear(e,t){"val"===t?$(e).val(""):"html"===t&&$(e).html("")}function shorterText(e){var t=e;return t.length>320&&(t=t.slice(0,320)),t}$(window).on("load",function(){$("#loader-wrapper").fadeOut(1e3)});var search=$("#search-text"),searchIcon=$("#search-icon"),searchList=$("#search-list");$("form :input").attr("autocomplete","off"),$(search).on("focus",function(){clear(this,"val"),$(this).css("width","500px")}),$(search).on("focusout",function(){""===$(search).val()&&$(this).css("width","100px")}),$(searchIcon).on("click",function(){""!==$(search).val()?(clear("#search-list","html"),filmSearch($(search).val())):alert("Please provide which film are you looking for.")}),$(".search").keydown(function(e){return 13===e.keyCode?(clear("#search-list","html"),filmSearch($(search).val()),!1):void(8===e.keyCode&&$(searchList).slideUp(function(){clear("#search-list","html")}))}),$(".search").mouseleave(function(){""!==$(searchList).html()&&$(searchList).slideUp(function(){clear("#search-list","html")})}),$(document).on("click",".film .close",function(){$(this).parent().fadeOut(function(){$(this).remove()})});